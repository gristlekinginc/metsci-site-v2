<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Structure Your Data - MeteoScientific</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://www.meteoscientific.com/docs/tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:image" content="https://meteoscientific.com/img/metsci-pro-social-card_1200x630.png"><meta data-rh="true" property="og:image:secure_url" content="https://meteoscientific.com/img/metsci-pro-social-card_1200x630.png"><meta data-rh="true" property="og:image:width" content="1200"><meta data-rh="true" property="og:image:height" content="630"><meta data-rh="true" property="og:image:type" content="image/png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:title" content="MeteoScientific - The Business of LoRaWAN"><meta data-rh="true" name="twitter:description"><meta data-rh="true" name="twitter:image" content="https://meteoscientific.com/img/metsci-pro-social-card-x_800x418.png"><meta data-rh="true" property="og:site_name" content="MeteoScientific"><meta data-rh="true" name="keywords" content="LoRaWAN, business IoT, massive IoT, LPWAN sensors"><meta data-rh="true" name="author" content="MeteoScientific"><meta data-rh="true" property="og:image:mobile" content="https://meteoscientific.com/img/metsci-pro-social-card-sms_300x200.png"><meta data-rh="true" property="og:image:mobile:width" content="300"><meta data-rh="true" property="og:image:mobile:height" content="200"><meta data-rh="true" property="og:image:type" content="image/png"><meta data-rh="true" property="og:image:alt" content="MeteoScientific - The Business of LoRaWAN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Structure Your Data - MeteoScientific"><meta data-rh="true" name="description" content="This guide is an attempt to help you step neatly past a major mistake I made when first getting into deploying LoRaWAN sensors: Bolloxing up my data structures."><meta data-rh="true" property="og:description" content="This guide is an attempt to help you step neatly past a major mistake I made when first getting into deploying LoRaWAN sensors: Bolloxing up my data structures."><link data-rh="true" rel="icon" href="/img/metsci_pro_favicon.svg"><link data-rh="true" rel="canonical" href="https://www.meteoscientific.com/docs/tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets"><link data-rh="true" rel="alternate" href="https://www.meteoscientific.com/docs/tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.meteoscientific.com/docs/tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MeteoScientific RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MeteoScientific Atom Feed">



<link rel="preload" href="/img/metsci_logo.svg" as="image" type="image/svg+xml">
<link rel="stylesheet" href="/css/custom.css">
<script src="https://www.googletagmanager.com/gtag/js?id=G-VNEKDSD64E" async></script>
<script src="/js/ga.js" async></script><link rel="stylesheet" href="/assets/css/styles.f233543b.css">
<script src="/assets/js/runtime~main.21bbb418.js" defer="defer"></script>
<script src="/assets/js/main.04ae42c3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/metsci_logo.svg" alt="MetSci Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/metsci_logo.svg" alt="MetSci Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">MeteoScientific</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorial-basics/LoRaWAN-Big-Picture">Tutorials</a><a class="navbar__item navbar__link" href="/podcast">Podcast</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a><a href="https://console.meteoscientific.com/front/login" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Console</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gristlekinginc/metsci-site-v2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorial-basics/LoRaWAN-Big-Picture">Tutorial Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/LoRaWAN-Big-Picture">LoRaWAN - The Big Picture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/intro-to-console">How to Use the LoRaWAN Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/device-profiles">Device Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/set-up-applications">Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/adding-a-device">Add A Device</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/metrics-on-chirpstack">Metrics &amp; Decoders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial-basics/configure-a-device">Configure A Device</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorial-basics/good-housekeeping-for-LoRaWAN-sensor-fleets">Structure Your Data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorial-extras/documentation">Tutorial Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/codecs/overview">Codec Library</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorial Basics</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Structure Your Data</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Good Housekeeping for Data Structures</h1>
<p>This guide is an attempt to help you step neatly past a major mistake I made when first getting into deploying LoRaWAN sensors: <strong>Bolloxing up my data structures.</strong></p>
<p>In the madly exciting journey of actually getting a sensor to connect to the <a href="https://console.meteoscientific.com/front/" target="_blank" rel="noopener noreferrer">MetSci LNS</a> and then send me data, I added all that data higgledy-piggeldy, using <code>Distance</code> or <code>distance</code> or <code>meters</code> or whatever set of units I had at the time for whatever sensor I was deploying.</p>
<p>This worked at the onesy-twosy level, but as I started adding more sensors and building databases to store the data, it bit me in the ass.</p>
<p>Let the bite marks on my ass be a guide to you. While scars add character, you don’t have to replicate all of mine.</p>
<p>This guide focuses on best practices for writing, modifying, and debugging LoRaWAN codecs to ensure clean, consistent, and reliable data processing. These principles help prevent common issues when integrating with databases like InfluxDB or visualizing data in applications.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-structured-data-matters-engineer-answer"><strong>Why Structured Data Matters (Engineer Answer)</strong><a href="#why-structured-data-matters-engineer-answer" class="hash-link" aria-label="Direct link to why-structured-data-matters-engineer-answer" title="Direct link to why-structured-data-matters-engineer-answer">​</a></h2>
<ol>
<li><strong>Scalability</strong>: As you add more devices, consistent structures simplify integration and maintenance.</li>
<li><strong>Compatibility</strong>: Adopting standardized fields and tags minimizes schema conflicts in databases like InfluxDB.</li>
<li><strong>Query Efficiency</strong>: Well-structured tags and fields enable faster and more precise queries.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardinality-considerations-nerd-talk">Cardinality Considerations (Nerd Talk)<a href="#cardinality-considerations-nerd-talk" class="hash-link" aria-label="Direct link to Cardinality Considerations (Nerd Talk)" title="Direct link to Cardinality Considerations (Nerd Talk)">​</a></h3>
<p>Cardinality refers to the number of unique values a tag or field can have in your database. While tags are indexed in InfluxDB for fast querying, high-cardinality tags (e.g., unique <code>devEui</code> values for thousands of devices) can significantly impact database performance.</p>
<p>This may not be a problem for most of us, as &quot;high cardinality&quot; only becomes an issue when you have hundreds of thousands of unique tag values.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-cardinality-matters">Why Cardinality Matters<a href="#why-cardinality-matters" class="hash-link" aria-label="Direct link to Why Cardinality Matters" title="Direct link to Why Cardinality Matters">​</a></h4>
<ol>
<li><strong>Storage Overhead</strong>: Each unique combination of tags creates a new series in InfluxDB, increasing storage requirements.</li>
<li><strong>Query Performance</strong>: High-cardinality tags slow down queries because the database must search through a larger index.</li>
<li><strong>Management Complexity</strong>: Excessively granular tags make it harder to maintain consistent schemas.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rules-of-thumb-for-high-cardinality">Rules of Thumb for High Cardinality<a href="#rules-of-thumb-for-high-cardinality" class="hash-link" aria-label="Direct link to Rules of Thumb for High Cardinality" title="Direct link to Rules of Thumb for High Cardinality">​</a></h4>
<ol>
<li>
<p><strong>Small Deployments (10–1,000 Devices)</strong></p>
<ul>
<li>Using <code>device_id</code> or <code>devEui</code> as tags is acceptable.</li>
<li>Use broader tags like <code>sensor_type</code> or <code>region</code> to group data logically.</li>
</ul>
</li>
<li>
<p><strong>Medium Deployments (1,000–10,000 Devices)</strong></p>
<ul>
<li>Avoid <code>devEui</code> as a tag unless necessary for querying.</li>
<li>Consider grouping devices by broader categories (e.g., <code>region</code>, <code>building_id</code>).</li>
</ul>
</li>
<li>
<p><strong>Large Deployments (10,000+ Devices)</strong></p>
<ul>
<li>Avoid high-cardinality tags entirely.</li>
<li>Store unique metadata (e.g., <code>device_id</code>) in external systems or as fields.</li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">​</a></h4>
<ul>
<li>Use high-cardinality tags like <code>devEui</code> only when you frequently filter or group data by individual devices.</li>
<li>Favor low-cardinality tags such as <code>region</code> or <code>sensor_type</code> for broader groupings.</li>
<li>Move metadata that rarely changes (e.g., <code>firmware_version</code>, <code>manufacturer</code>) into fields or external metadata stores.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inspiration-from-six-real-lorawan-payloads"><strong>Inspiration From Six Real LoRaWAN Payloads</strong><a href="#inspiration-from-six-real-lorawan-payloads" class="hash-link" aria-label="Direct link to inspiration-from-six-real-lorawan-payloads" title="Direct link to inspiration-from-six-real-lorawan-payloads">​</a></h2>
<p>To illustrate consistent naming, consider the following top-level fields from <strong>six sample LoRaWAN payloads</strong> commonly seen on the MetSci LNS. This structure helps ensure each payload is parsed and stored in a standardized way:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-top-level-fields">Common Top-Level Fields<a href="#common-top-level-fields" class="hash-link" aria-label="Direct link to Common Top-Level Fields" title="Direct link to Common Top-Level Fields">​</a></h3>
<ol>
<li><strong>deduplicationId</strong></li>
<li><strong>time</strong></li>
<li><strong>deviceInfo</strong>
<ul>
<li><code>tenantId</code>, <code>tenantName</code>, <code>applicationId</code>, <code>applicationName</code>,</li>
<li><code>deviceProfileId</code>, <code>deviceProfileName</code>, <code>deviceName</code>,</li>
<li><code>devEui</code>, <code>deviceClassEnabled</code>, <code>tags</code></li>
</ul>
</li>
<li><strong>devAddr</strong></li>
<li><strong>adr</strong></li>
<li><strong>dr</strong></li>
<li><strong>fCnt</strong></li>
<li><strong>fPort</strong></li>
<li><strong>confirmed</strong></li>
<li><strong>data</strong></li>
<li><strong>object</strong> (contains sensor readings; may vary by device)</li>
<li><strong>rxInfo</strong> (array detailing gateways, RSSI, SNR, etc.)</li>
<li><strong>txInfo</strong> (frequency, modulation, etc.)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-device-payload-structures">Example Device Payload Structures<a href="#example-device-payload-structures" class="hash-link" aria-label="Direct link to Example Device Payload Structures" title="Direct link to Example Device Payload Structures">​</a></h3>
<ul>
<li><strong>LDDS75</strong> (Liquid Level Sensor):<!-- -->
<ul>
<li><code>object</code> includes keys like <code>Distance</code>, <code>TempC_DS18B20</code>, <code>log.distance</code>, etc.</li>
</ul>
</li>
<li><strong>AM319</strong> (Indoor Conditions Sensor):<!-- -->
<ul>
<li><code>object</code> includes <code>pm2.5</code>, <code>co2</code>, <code>lightLevel</code>, <code>temperature</code>, etc.</li>
</ul>
</li>
<li><strong>S2120</strong> (Weather Station):<!-- -->
<ul>
<li><code>object</code> includes <code>wind_speed</code>, <code>barometric_pressure</code>, <code>air_temperature</code>, etc.</li>
</ul>
</li>
<li><strong>Senzemo SMC30 Stick</strong>:<!-- -->
<ul>
<li><em>No top-level <code>object</code></em>; raw data is in <code>data</code>.</li>
</ul>
</li>
<li><strong>PIR Sensor</strong>:<!-- -->
<ul>
<li><code>object</code> includes <code>capacity</code>, <code>roomStatusTime</code>, <code>roomStatusOccupied</code>, etc.</li>
</ul>
</li>
<li><strong>Water Leak Sensor</strong>:<!-- -->
<ul>
<li><code>object</code> includes <code>waterLeakage</code>, <code>temperature</code>, <code>humidity</code>, etc.</li>
</ul>
</li>
</ul>
<p>This consistency makes it easier to write and maintain decoders, store data in databases, and query for sensor metrics.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="planned-tags-and-fields"><strong>Planned Tags and Fields</strong><a href="#planned-tags-and-fields" class="hash-link" aria-label="Direct link to planned-tags-and-fields" title="Direct link to planned-tags-and-fields">​</a></h2>
<p>For InfluxDB or other time-series databases, plan your structure around tags (metadata for grouping/ filtering) and fields (actual measurements). Even if you’re not using InfluxDB, this general approach applies well to other databases.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tags-table"><strong>Tags Table</strong><a href="#tags-table" class="hash-link" aria-label="Direct link to tags-table" title="Direct link to tags-table">​</a></h3>
<p>Tags provide metadata about each measurement and are ideal for filtering and grouping data.</p>
<table><thead><tr><th><strong>Tag</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>devEui</code></td><td>Unique identifier for each sensor</td></tr><tr><td><code>device_name</code></td><td>Human-readable name of the device</td></tr><tr><td><code>firmware_version</code></td><td>For tracking device firmware</td></tr><tr><td><code>label</code></td><td>Context-specific label for the device</td></tr><tr><td><code>location</code></td><td>Physical location of the sensor (e.g., &quot;Office&quot;)</td></tr><tr><td><code>sensor_type</code></td><td>Device type (e.g., &quot;AM319&quot;, &quot;LDDS75&quot;, &quot;PIR&quot;, &quot;S2120&quot;)</td></tr><tr><td><code>tenant_id</code></td><td>Identifier for the tenant owning the device</td></tr><tr><td><code>network</code></td><td>The network the sensor is part of (e.g., &quot;helium_iot&quot;)</td></tr><tr><td><code>gateway_id</code></td><td>Identifier of the gateway forwarding the data</td></tr><tr><td><code>gateway_name</code></td><td>Human-readable name of the gateway</td></tr><tr><td><code>gateway_location</code></td><td>Physical location of the gateway (lat, long)</td></tr><tr><td><code>region</code></td><td>LoRaWAN region configuration (e.g., &quot;US915&quot;)</td></tr><tr><td><code>hardware_mode</code></td><td>Specific hardware configuration or mode (e.g., &quot;CLASS_A&quot;, &quot;LT22222&quot;)</td></tr><tr><td><code>work_mode</code></td><td>Operational mode of the device</td></tr><tr><td><code>parking_status</code></td><td>Parking availability status (e.g., &quot;FREE&quot;, &quot;OCCUPIED&quot;)</td></tr><tr><td><code>schema_version</code></td><td>For tracking data structure changes</td></tr><tr><td><code>status_changed</code></td><td>Indicates if a status change occurred</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fields-table"><strong>Fields Table</strong><a href="#fields-table" class="hash-link" aria-label="Direct link to fields-table" title="Direct link to fields-table">​</a></h3>
<p>Fields store the actual sensor readings and vary by sensor type. Below are some examples inspired by the payloads above.</p>
<table><thead><tr><th><strong>Field</strong></th><th><strong>Type</strong></th><th><strong>Unit</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>battery_voltage</code></td><td>Float</td><td>V</td><td>Battery voltage (e.g., from LDDS75 or PIR)</td></tr><tr><td><code>distance</code></td><td>Integer</td><td>mm</td><td>Distance measurement (LDDS75)</td></tr><tr><td><code>air_humidity</code></td><td>Float</td><td>%</td><td>Air humidity (AM319, S2120)</td></tr><tr><td><code>air_temperature</code></td><td>Float</td><td>°C</td><td>Air temperature (AM319, S2120)</td></tr><tr><td><code>co2</code></td><td>Float</td><td>ppm</td><td>CO2 concentration (AM319)</td></tr><tr><td><code>light_level</code></td><td>Integer</td><td>lux</td><td>Light level measurement (AM319)</td></tr><tr><td><code>pm10</code></td><td>Float</td><td>µg/m³</td><td>PM10 concentration (AM319)</td></tr><tr><td><code>pm2_5</code></td><td>Float</td><td>µg/m³</td><td>PM2.5 concentration (AM319)</td></tr><tr><td><code>pressure</code></td><td>Integer</td><td>Pa</td><td>Atmospheric pressure (S2120)</td></tr><tr><td><code>wind_speed</code></td><td>Float</td><td>m/s</td><td>Wind speed (S2120)</td></tr><tr><td><code>wind_direction_sensor</code></td><td>Float</td><td>degrees</td><td>Wind direction (S2120)</td></tr><tr><td><code>rain_gauge</code></td><td>Float</td><td>mm</td><td>Rain gauge reading (S2120)</td></tr><tr><td><code>temperature</code></td><td>Float</td><td>°C</td><td>Basic temperature reading (could be from PIR or Water Leak)</td></tr><tr><td><code>roomStatusOccupied</code></td><td>Boolean</td><td>N/A</td><td>Occupancy status (PIR)</td></tr><tr><td><code>water_leakage</code></td><td>Boolean</td><td>N/A</td><td>Leak status (Water Leak Sensor)</td></tr><tr><td><code>rssi</code></td><td>Integer</td><td>dBm</td><td>Signal strength</td></tr><tr><td><code>snr</code></td><td>Float</td><td>dB</td><td>Signal-to-noise ratio</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-data-structure-for-influxdb"><strong>Example Data Structure for InfluxDB</strong><a href="#example-data-structure-for-influxdb" class="hash-link" aria-label="Direct link to example-data-structure-for-influxdb" title="Direct link to example-data-structure-for-influxdb">​</a></h2>
<p>Below is a sample representation of how you might structure one of your sensor payloads (for example, a S2120 Weather Station) when sending it to InfluxDB:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;measurement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sensor_measurements&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;devEui&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;6081f905e7de05d7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;device_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;S2120 - Sensecap WX 001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Field&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sensor_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;S2120&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;tenant_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2f78609d-a859-41b9-8d19-2c06e2edd5b4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;network&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;helium_iot&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;gateway_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;112kwtzsie4hAujhtyjPuZdRZ8kKLvLqhXn63wuyDqkxFN2Q7noo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;gateway_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;acidic-punch-copperhead&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US915&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;hardware_mode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CLASS_A&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;work_mode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;default&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;parking_status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;FREE&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;status_changed&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;wind_speed&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_humidity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">37.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;barometric_pressure&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100160.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;light_intensity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;uv_index&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_temperature&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12.6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;rain_gauge&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;wind_direction_sensor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;rssi&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-114</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;snr&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-6.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;timestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-01-06T04:24:41.409Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This example is based on the fields from the <strong>S2120</strong> Weather Station payload. Notice how we are using the top-level metadata (like <code>region</code>, <code>network</code>, etc.) as tags and the sensor readings (like <code>air_temperature</code>, <code>wind_speed</code>, and <code>snr</code>) as fields.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrating-metadata-optimization-in-codec-design"><strong>Integrating Metadata Optimization in Codec Design</strong><a href="#integrating-metadata-optimization-in-codec-design" class="hash-link" aria-label="Direct link to integrating-metadata-optimization-in-codec-design" title="Direct link to integrating-metadata-optimization-in-codec-design">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="caching-metadata-for-periodic-updates">Caching Metadata for Periodic Updates<a href="#caching-metadata-for-periodic-updates" class="hash-link" aria-label="Direct link to Caching Metadata for Periodic Updates" title="Direct link to Caching Metadata for Periodic Updates">​</a></h3>
<p>You can optimize your codec by caching metadata that rarely changes (e.g., <code>tenant_id</code>, <code>region</code>, <code>sensor_type</code>) and refreshing it periodically. Here&#x27;s an example approach:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">decodeUplink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> metadataCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getMetadataCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Retrieve cached metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> metadataRefreshInterval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">86400000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 24 hours in milliseconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">metadataCache </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentTime </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> metadataCache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">lastUpdated</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> metadataRefreshInterval</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Update metadata cache if expired or not present</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataCache </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">devEui</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0004a30b012d3577&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">sensor_type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SMC30&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">tenant_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2f78609d-a859-41b9-8d19-2c06e2edd5b4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">region</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US915&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">lastUpdated</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> currentTime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setMetadataCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metadataCache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Save updated metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Decode dynamic measurements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> measurements </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Hypothetical Senzemo SMC30 decoding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Suppose input.bytes = [0xAA, 0xE2, 0x10, ...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Typically you&#x27;d parse actual sensor data here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">some_measurement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Combine metadata and measurements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">metadataCache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">measurements</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Mocked cache functions for demonstration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getMetadataCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">localStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;metadataCache&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setMetadataCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">cache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">localStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;metadataCache&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cache</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation">Explanation:<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation:" title="Direct link to Explanation:">​</a></h3>
<ol>
<li><strong>Metadata Cache</strong>: A local storage object holds metadata like <code>tenant_id</code> and <code>sensor_type</code>.</li>
<li><strong>Periodic Refresh</strong>: Metadata is refreshed only when its cache has expired (e.g., every 24 hours).</li>
<li><strong>Dynamic Measurements</strong>: Each uplink includes only the dynamic measurements, reducing payload size.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages">Advantages<a href="#advantages" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h3>
<ul>
<li>Reduces repetitive transmission of static data.</li>
<li>Improves uplink efficiency and database storage.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-for-aligning-codec-output-to-best-practices"><strong>Workflow for Aligning Codec Output to Best Practices</strong><a href="#workflow-for-aligning-codec-output-to-best-practices" class="hash-link" aria-label="Direct link to workflow-for-aligning-codec-output-to-best-practices" title="Direct link to workflow-for-aligning-codec-output-to-best-practices">​</a></h2>
<ol>
<li><strong>Design Your Schema</strong>: Use the above tag and field guidelines (plus the top-level fields from real sensor payloads) as your reference.</li>
<li><strong>Adapt the Codec</strong>: Modify your ChirpStack codec to output JSON that matches your schema (paying attention to consistent naming for <code>object</code> fields like <code>distance</code>, <code>air_humidity</code>, etc.).</li>
<li><strong>Test with Sample Payloads</strong>: Verify that your output adheres to the schema using ChirpStack’s uplink debugger or Node-RED debug nodes.</li>
<li><strong>Validate in Database</strong>: Send test payloads to your InfluxDB instance and run queries to ensure the data is stored and indexed correctly.</li>
</ol>
<hr>
<p>By following these practices, you’ll create a reliable and scalable system for managing and analyzing your LoRaWAN sensor fleet.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Advanced Topic</div><div class="admonitionContent_BuS1"><p>For large deployments with very different sensor types, you might consider splitting your data into multiple measurements (e.g., <code>weather_measurements</code>, <code>parking_measurements</code>). This requires more complex codec design but can provide better data organization and query performance. Start with the single measurement approach and refactor if needed.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-structure-planning"><strong>Data Structure Planning</strong><a href="#data-structure-planning" class="hash-link" aria-label="Direct link to data-structure-planning" title="Direct link to data-structure-planning">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="small-deployments-1100-devices">Small Deployments (1–100 devices)<a href="#small-deployments-1100-devices" class="hash-link" aria-label="Direct link to Small Deployments (1–100 devices)" title="Direct link to Small Deployments (1–100 devices)">​</a></h3>
<ul>
<li>Use a simple, flat data structure.</li>
<li>Store all metadata as tags.</li>
<li>Example implementation:</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;measurement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sensor_data&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;devEui&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a84041d000000001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;office&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sensor_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;AM319&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_temperature&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_humidity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="medium-deployments-1001000-devices">Medium Deployments (100–1,000 devices)<a href="#medium-deployments-1001000-devices" class="hash-link" aria-label="Direct link to Medium Deployments (100–1,000 devices)" title="Direct link to Medium Deployments (100–1,000 devices)">​</a></h3>
<ul>
<li>Group devices by type and location.</li>
<li>Use hierarchical tags.</li>
<li>Consider separating metadata to reduce cardinality.</li>
<li>Example implementation:</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;measurement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;environmental_sensors&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;west&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;building&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HQ&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;floor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sensor_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;AM319&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_temperature&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;air_humidity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;devEui&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a84041d000000001&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Moved to field to reduce tag cardinality</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="large-deployments-1000-devices">Large Deployments (1,000+ devices)<a href="#large-deployments-1000-devices" class="hash-link" aria-label="Direct link to Large Deployments (1,000+ devices)" title="Direct link to Large Deployments (1,000+ devices)">​</a></h3>
<ul>
<li>Separate measurements by sensor type.</li>
<li>Use external metadata store for rarely changing info.</li>
<li>Implement data retention policies.</li>
<li>Example implementation:</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Main data measurement</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;measurement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temperature_sensors&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;west&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sensor_group&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;environmental&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;devEui&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a84041d000000001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;metadata_version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Separate metadata store (updated less frequently)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;measurement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;device_metadata&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;tags&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;devEui&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a84041d000000001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sensor_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;AM319&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HQ-3F-Room301&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;install_date&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;firmware&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.2.3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;calibration_date&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-scaling-considerations">Key Scaling Considerations<a href="#key-scaling-considerations" class="hash-link" aria-label="Direct link to Key Scaling Considerations" title="Direct link to Key Scaling Considerations">​</a></h3>
<ol>
<li>
<p><strong>Data Volume Management</strong></p>
<ul>
<li>Implement downsampling for historical data.</li>
<li>Use retention policies based on data importance.</li>
<li>Consider multi-tier storage solutions.</li>
</ul>
</li>
<li>
<p><strong>Query Optimization</strong></p>
<ul>
<li>Index frequently queried tags.</li>
<li>Use time-based partitioning.</li>
<li>Implement query caching where appropriate.</li>
</ul>
</li>
<li>
<p><strong>Metadata Management</strong></p>
<ul>
<li>Store static metadata separately.</li>
<li>Version control your metadata.</li>
<li>Implement metadata update procedures.</li>
</ul>
</li>
<li>
<p><strong>Monitoring and Maintenance</strong></p>
<ul>
<li>Track database size and growth.</li>
<li>Monitor query performance.</li>
<li>Set up alerts for anomalies.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-in-the-metsci-chirpstack-console"><strong>Implementing in the MetSci Chirpstack Console</strong><a href="#implementing-in-the-metsci-chirpstack-console" class="hash-link" aria-label="Direct link to implementing-in-the-metsci-chirpstack-console" title="Direct link to implementing-in-the-metsci-chirpstack-console">​</a></h2>
<p>Once you&#x27;ve planned your data structure using these guidelines—and referenced real payloads like <strong>LDDS75</strong>, <strong>AM319</strong>, <strong>S2120</strong>, <strong>Senzemo SMC30</strong>, <strong>PIR</strong>, and <strong>Water Leak</strong> sensors—see our <a href="/docs/tutorial-basics/metrics-on-chirpstack">Metrics &amp; Decoders guide</a> for detailed implementation steps in ChirpStack or other LoRaWAN servers.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gristlekinginc/metsci-site-v2/tree/main/docs/tutorial-basics/009-good-housekeeping-for-LoRaWAN-sensor-fleets.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorial-basics/configure-a-device"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configure A Device</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorial-extras/documentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Finding Docs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-structured-data-matters-engineer-answer" class="table-of-contents__link toc-highlight"><strong>Why Structured Data Matters (Engineer Answer)</strong></a><ul><li><a href="#cardinality-considerations-nerd-talk" class="table-of-contents__link toc-highlight">Cardinality Considerations (Nerd Talk)</a></li></ul></li><li><a href="#inspiration-from-six-real-lorawan-payloads" class="table-of-contents__link toc-highlight"><strong>Inspiration From Six Real LoRaWAN Payloads</strong></a><ul><li><a href="#common-top-level-fields" class="table-of-contents__link toc-highlight">Common Top-Level Fields</a></li><li><a href="#example-device-payload-structures" class="table-of-contents__link toc-highlight">Example Device Payload Structures</a></li></ul></li><li><a href="#planned-tags-and-fields" class="table-of-contents__link toc-highlight"><strong>Planned Tags and Fields</strong></a><ul><li><a href="#tags-table" class="table-of-contents__link toc-highlight"><strong>Tags Table</strong></a></li><li><a href="#fields-table" class="table-of-contents__link toc-highlight"><strong>Fields Table</strong></a></li></ul></li><li><a href="#example-data-structure-for-influxdb" class="table-of-contents__link toc-highlight"><strong>Example Data Structure for InfluxDB</strong></a></li><li><a href="#integrating-metadata-optimization-in-codec-design" class="table-of-contents__link toc-highlight"><strong>Integrating Metadata Optimization in Codec Design</strong></a><ul><li><a href="#caching-metadata-for-periodic-updates" class="table-of-contents__link toc-highlight">Caching Metadata for Periodic Updates</a></li><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation:</a></li><li><a href="#advantages" class="table-of-contents__link toc-highlight">Advantages</a></li></ul></li><li><a href="#workflow-for-aligning-codec-output-to-best-practices" class="table-of-contents__link toc-highlight"><strong>Workflow for Aligning Codec Output to Best Practices</strong></a></li><li><a href="#data-structure-planning" class="table-of-contents__link toc-highlight"><strong>Data Structure Planning</strong></a><ul><li><a href="#small-deployments-1100-devices" class="table-of-contents__link toc-highlight">Small Deployments (1–100 devices)</a></li><li><a href="#medium-deployments-1001000-devices" class="table-of-contents__link toc-highlight">Medium Deployments (100–1,000 devices)</a></li><li><a href="#large-deployments-1000-devices" class="table-of-contents__link toc-highlight">Large Deployments (1,000+ devices)</a></li><li><a href="#key-scaling-considerations" class="table-of-contents__link toc-highlight">Key Scaling Considerations</a></li></ul></li><li><a href="#implementing-in-the-metsci-chirpstack-console" class="table-of-contents__link toc-highlight"><strong>Implementing in the MetSci Chirpstack Console</strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial-basics/LoRaWAN-Big-Picture">Tutorials</a></li><li class="footer__item"><a href="https://www.youtube.com/@meteoscientific" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Moar</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/podcast">Podcast</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/4fR5QAq6Vc" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/meteoscientific" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/donate">Donate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Owned By</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://x.com/thegristleking" target="_blank" rel="noopener noreferrer" class="footer__link-item">X</a></li><li class="footer__item"><a href="https://www.linkedin.com/in/nikhawks/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/media">Media Assets</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 MeteoScientific, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>